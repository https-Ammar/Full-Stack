const audioList = [
  {
    title: "Ehsan Ali",
    country: "Palestine",
    sources: [
      { src: "../audio/Ihsan.mp3", type: "audio/mpeg" },
      { src: "../audio/Ihsan.mp3", type: "audio/ogg" },
      { src: "../audio/Ihsan.mp3", type: "audio/wav" },
      { src: "../audio/Ihsan.mp3", type: "audio/aac" },
      { src: "../audio/Ihsan.mp3", type: "audio/flac" },
      { src: "../audio/Ihsan.mp3", type: "audio/webm" },
      { src: "../audio/Ihsan.mp3", type: "audio/mp4" },
      { src: "../audio/Ihsan.mp3", type: "audio/midi" },
    ],
  },
  {
    title: "Noor Qnebi",
    country: "Palestine",
    sources: [
      { src: "../audio/Noor.mp3", type: "audio/mpeg" },
      { src: "../audio/Noor.mp3", type: "audio/ogg" },
      { src: "../audio/Noor.mp3", type: "audio/wav" },
      { src: "../audio/Noor.mp3", type: "audio/aac" },
      { src: "../audio/Noor.mp3", type: "audio/flac" },
      { src: "../audio/Noor.mp3", type: "audio/webm" },
      { src: "../audio/Noor.mp3", type: "audio/mp4" },
      { src: "../audio/Noor.mp3", type: "audio/midi" },
    ],
  },
  {
    title: "Mira Abdallah",
    country: "Palestine",
    sources: [
      { src: "../audio/Mera.mp3", type: "audio/mpeg" },
      { src: "../audio/Mera.mp3", type: "audio/ogg" },
      { src: "../audio/Mera.mp3", type: "audio/wav" },
      { src: "../audio/Mera.mp3", type: "audio/aac" },
      { src: "../audio/Mera.mp3", type: "audio/flac" },
      { src: "../audio/Mera.mp3", type: "audio/webm" },
      { src: "../audio/Mera.mp3", type: "audio/mp4" },
      { src: "../audio/Mera.mp3", type: "audio/midi" },
    ],
  },
  {
    title: "Muhammad Naser",
    country: "Palestine",
    sources: [
      { src: "../audio/Naser.mp3", type: "audio/mpeg" },
      { src: "../audio/Naser.mp3", type: "audio/ogg" },
      { src: "../audio/Naser.mp3", type: "audio/wav" },
      { src: "../audio/Naser.mp3", type: "audio/aac" },
      { src: "../audio/Naser.mp3", type: "audio/flac" },
      { src: "../audio/Naser.mp3", type: "audio/webm" },
      { src: "../audio/Naser.mp3", type: "audio/mp4" },
      { src: "../audio/Naser.mp3", type: "audio/midi" },
    ],
  },

  {
    title: "Ahmed Othman",
    country: "Palestine",
    sources: [
      { src: "../audio/Othman.mp3", type: "audio/mpeg" },
      { src: "../audio/Othman.mp3", type: "audio/ogg" },
      { src: "../audio/Othman.mp3", type: "audio/wav" },
      { src: "../audio/Othman.mp3", type: "audio/aac" },
      { src: "../audio/Othman.mp3", type: "audio/flac" },
      { src: "../audio/Othman.mp3", type: "audio/webm" },
      { src: "../audio/Othman.mp3", type: "audio/mp4" },
      { src: "../audio/Othman.mp3", type: "audio/midi" },
    ],
  },

  {
    title: "Saja Fawaz",
    country: "Palestine",
    sources: [
      { src: "../audio/Saja.mp3", type: "audio/mpeg" },
      { src: "../audio/Saja.mp3", type: "audio/ogg" },
      { src: "../audio/Saja.mp3", type: "audio/wav" },
      { src: "../audio/Saja.mp3", type: "audio/aac" },
      { src: "../audio/Saja.mp3", type: "audio/flac" },
      { src: "../audio/Saja.mp3", type: "audio/webm" },
      { src: "../audio/Saja.mp3", type: "audio/mp4" },
      { src: "../audio/Saja.mp3", type: "audio/midi" },
    ],
  },

  {
    title: "Muhamed Samy",
    country: "Palestine",
    sources: [
      { src: "../audio/Sami.mp3", type: "audio/mpeg" },
      { src: "../audio/Sami.mp3", type: "audio/ogg" },
      { src: "../audio/Sami.mp3", type: "audio/wav" },
      { src: "../audio/Sami.mp3", type: "audio/aac" },
      { src: "../audio/Sami.mp3", type: "audio/flac" },
      { src: "../audio/Sami.mp3", type: "audio/webm" },
      { src: "../audio/Sami.mp3", type: "audio/mp4" },
      { src: "../audio/Sami.mp3", type: "audio/midi" },
    ],
  },

  {
    title: "Ahmed Al-Hamaida",
    country: "Palestine",
    sources: [
      { src: "../audio/Hamaida.mp3", type: "audio/mpeg" },
      { src: "../audio/Hamaida.mp3", type: "audio/ogg" },
      { src: "../audio/Hamaida.mp3", type: "audio/wav" },
      { src: "../audio/Hamaida.mp3", type: "audio/aac" },
      { src: "../audio/Hamaida.mp3", type: "audio/flac" },
      { src: "../audio/Hamaida.mp3", type: "audio/webm" },
      { src: "../audio/Hamaida.mp3", type: "audio/mp4" },
      { src: "../audio/Hamaida.mp3", type: "audio/midi" },
    ],
  },

  {
    title: "Ahmed Essam",
    country: "Palestine",
    sources: [
      { src: "../audio/Essam.mp3", type: "audio/mpeg" },
      { src: "../audio/Essam.mp3", type: "audio/ogg" },
      { src: "../audio/Essam.mp3", type: "audio/wav" },
      { src: "../audio/Essam.mp3", type: "audio/aac" },
      { src: "../audio/Essam.mp3", type: "audio/flac" },
      { src: "../audio/Essam.mp3", type: "audio/webm" },
      { src: "../audio/Essam.mp3", type: "audio/mp4" },
      { src: "../audio/Essam.mp3", type: "audio/midi" },
    ],
  },

  {
    title: "Heba Gamal",
    country: "Palestine",
    sources: [
      { src: "../audio/Heba.mp3", type: "audio/mpeg" },
      { src: "../audio/Heba.mp3", type: "audio/ogg" },
      { src: "../audio/Heba.mp3", type: "audio/wav" },
      { src: "../audio/Heba.mp3", type: "audio/aac" },
      { src: "../audio/Heba.mp3", type: "audio/flac" },
      { src: "../audio/Heba.mp3", type: "audio/webm" },
      { src: "../audio/Heba.mp3", type: "audio/mp4" },
      { src: "../audio/Heba.mp3", type: "audio/midi" },
    ],
  },
];

const playIcon = `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
  <path d="M8 5v14l11-7z"/>
</svg>`;

const pauseIcon = `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
  <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
</svg>`;

let currentTrackIndex = 0;

const audio = document.getElementById("hidden-player");
const playBtn = document.querySelector(".play-button");
const prevBtn = document.querySelector(".prev");
const nextBtn = document.querySelector(".next");

const title = document.querySelector(".title");
const country = document.querySelector(".country");
const progress = document.querySelector("progress");
const timeNow = document.querySelector(".time-now");
const timeFinish = document.querySelector(".time-finish");

function formatTime(seconds) {
  const h = Math.floor(seconds / 3600);
  const m = Math.floor((seconds % 3600) / 60);
  const s = Math.floor(seconds % 60);
  return `${h}:${m.toString().padStart(2, "0")}:${s
    .toString()
    .padStart(2, "0")}`;
}

function loadTrack(index) {
  const track = audioList[index];
  audio.innerHTML = "";
  track.sources.forEach((source) => {
    const s = document.createElement("source");
    s.src = source.src;
    s.type = source.type;
    audio.appendChild(s);
  });
  audio.load();
  title.textContent = track.title;
  country.textContent = track.country;
  playBtn.innerHTML = playIcon;
}

function playTrack() {
  audio.play();
  playBtn.innerHTML = pauseIcon;
}

function pauseTrack() {
  audio.pause();
  playBtn.innerHTML = playIcon;
}

playBtn.addEventListener("click", () => {
  if (audio.paused) {
    playTrack();
  } else {
    pauseTrack();
  }
});

prevBtn.addEventListener("click", () => {
  currentTrackIndex =
    (currentTrackIndex - 1 + audioList.length) % audioList.length;
  loadTrack(currentTrackIndex);
  playTrack();
});

nextBtn.addEventListener("click", () => {
  currentTrackIndex = (currentTrackIndex + 1) % audioList.length;
  loadTrack(currentTrackIndex);
  playTrack();
});

audio.addEventListener("timeupdate", () => {
  if (audio.duration) {
    progress.value = audio.currentTime / audio.duration;
    timeNow.textContent = formatTime(audio.currentTime);
    timeFinish.textContent = formatTime(audio.duration);
  }
});

audio.addEventListener("ended", () => {
  nextBtn.click();
});

loadTrack(currentTrackIndex);
